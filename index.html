<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <title>InfoCana ‚Ä¢ USCO vs2 </title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#2563eb"/>
  <link rel="manifest" href="manifest.json">
  
  <link rel="stylesheet" href="style.css">

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.8.2/dist/jspdf.plugin.autotable.min.js"></script>
</head>

<body class="bg-gray-100 min-h-screen flex flex-col items-center py-8 px-4 font-sans text-gray-800">

    <div id="loginScreen" class="w-full max-w-md mx-auto bg-white p-8 rounded-lg shadow-md">
    <h2 class="text-2xl font-bold text-center text-orange-600 mb-6">InfoCana ‚Ä¢ Acesso</h2>
    
   
    <form id="formLoginOperador" class="space-y-4">
      <div>
        <label for="loginMatricula" class="block text-sm font-semibold mb-1">Matr√≠cula</label>
        <input id="loginMatricula" type="text" required class="w-full border rounded px-3 py-2" placeholder="Digite sua matr√≠cula" />
      </div>
      <div>
        <label for="loginNome" class="block text-sm font-semibold mb-1">Usu√°rio</label>
        <input id="loginNome" type="text" required class="w-full border rounded px-3 py-2" placeholder="Digite seu nome, ex: joao jose" />
      </div>
      <button type="submit" class="w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Entrar</button>
    </form>
    <div id="loginError" class="hidden mt-4 text-center text-red-600 text-sm"></div>
    <div class="mt-4 text-center text-sm">
      <button id="btnAdminLogin" class="text-blue-600 hover:underline">Acesso Administrador</button>
    </div>
  </div>




  <main class="w-full max-w-6xl hidden">
    <header class="flex items-center justify-between mb-6 pb-4 border-b border-gray-200">
      <h1 class="text-2xl font-bold text-orange-600">InfoCana ‚Ä¢ USCO</h1>
      <button id="btnSessao" class="bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700">Sair</button>
    </header>

    <div id="mensagem" class="hidden p-3 rounded mb-4"></div>

    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4">
      <div class="flex items-center gap-2">
        <span id="dotConexao" class="inline-block w-3 h-3 rounded-full bg-green-500"></span>
        <span id="txtConexao" class="text-sm text-gray-700">Conectado</span>
      </div>
      <div class="text-xs text-gray-500">
        As altera√ß√µes feitas <strong>offline</strong> ser√£o sincronizadas automaticamente ao restabelecer a conex√£o.
      </div>
    </div>
    

<div id="navContainer" class="border-b border-gray-200 mb-6 flex items-center justify-between">
  <nav class="-mb-px hidden md:flex space-x-6" aria-label="Tabs">
    <button data-tab="projetos"
      class="tab-btn aba-bloqueada flex items-center gap-2 whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 hover:text-blue-600 hover:border-blue-300">
      üìÇ Projetos
    </button>

    <button data-tab="cadastro"
      class="tab-btn aba-bloqueada flex items-center gap-2 whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 hover:text-blue-600 hover:border-blue-300">
      üìù Cadastro de √Åreas
    </button>

    <button data-tab="operador"
      class="tab-btn flex items-center gap-2 whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-blue-600 border-blue-600 active">
      ‚úÖ √Åreas Cadastradas
    </button>

    <button data-tab="relatorios"
      class="tab-btn aba-bloqueada flex items-center gap-2 whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 hover:text-blue-600 hover:border-blue-300">
      üìä Relat√≥rios
    </button>
  </nav>

  <div class="relative md:hidden ml-auto">
    <button id="menuAbasBtn" class="flex items-center gap-2 py-3 px-4 text-gray-700 hover:text-blue-600 font-medium">
      <span id="menuAbasLabel"></span> <div class="menu-icon w-6 h-6 relative">
        <span class="bar absolute top-1 w-6 h-0.5 bg-current transition-all duration-300"></span>
        <span class="bar absolute top-3 w-6 h-0.5 bg-current transition-all duration-300"></span>
        <span class="bar absolute top-5 w-6 h-0.5 bg-current transition-all duration-300"></span>
      </div>
    </button>

    <div id="menuAbas" class="hidden absolute right-0 mt-2 w-56 bg-white border rounded shadow-lg z-20">
      </div>
  </div>
</div>

      <section id="content-projetos" class="p-6 hidden space-y-6">
        <h1 class="text-2xl md:text-3xl font-semibold text-orange-600">Projetos</h1>
        <p class="text-sm text-gray-600">Gerencie os projetos, insira ou remova.</p>

        <form id="formProjeto" class="flex gap-2 items-end">
          <div class="flex-1">
            <label for="novoProjeto" class="block text-sm font-semibold mb-1">Novo Projeto</label>
            <input id="novoProjeto" class="w-full border rounded px-3 py-2" placeholder="Ex: Projeto A" />
          </div>
          <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Adicionar</button>
        </form>

        <div>
          <h3 class="font-semibold mb-2">Lista de Projetos</h3>
          <ul id="listaProjetos" class="space-y-2"></ul>
        </div>
      </section>

      <section id="content-cadastro" class="p-6 hidden space-y-6">
        <h1 class="text-2xl md:text-3xl font-semibold text-orange-600">Cadastro de √Åreas</h1>

        <form id="formArea" class="space-y-6" novalidate>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">

  <div>
    <label for="projeto" class="block text-sm font-semibold mb-1">Projeto</label>
    <select id="projeto" required class="w-full border rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"></select>
  </div>
  <div>
    <label for="bombeamento" class="block text-sm font-semibold mb-1">Bombeamento</label>
    <input id="bombeamento" required class="w-full border rounded px-3 py-2" placeholder="Ex: B01" />
  </div>
  <div>
    <label for="bloco" class="block text-sm font-semibold mb-1">Nome do Bloco</label>
    <input id="bloco" required class="w-full border rounded px-3 py-2" placeholder="Ex: 21 - Vila EB1" />
  </div>

  <div>
    <label for="areaHectares" class="block text-sm font-semibold mb-1">√Årea do bloco/talh√£o (hectares)</label>
    <input id="areaHectares" type="number" step="0.01" required class="w-full border rounded px-3 py-2" placeholder="Ex: 25.5" />
  </div>
  <div>
    <label for="talhao" class="block text-sm font-semibold mb-1">Talh√£o</label>
    <input id="talhao" type="text" required class="w-full border rounded px-3 py-2" placeholder="Ex: 1 ao 4" />
  </div>
  <div>
    <label for="numeroEletrobomba" class="block text-sm font-semibold mb-1">N¬∞ Eletrobomba</label>
    <input id="numeroEletrobomba" required class="w-full border rounded px-3 py-2" placeholder="Ex: 130001" />
  </div>

  <div>
    <label for="quantidadeCarreteis" class="block text-sm font-semibold mb-1">Quantidade de Carret√©is</label>
    <input id="quantidadeCarreteis" type="number" min="1" required class="w-full border rounded px-3 py-2" placeholder="Ex: 2" />
  </div>
  <div>
    <label for="tipoArea" class="block text-sm font-semibold mb-1">Tipo de √Årea</label>
    <select id="tipoArea" required class="w-full border rounded px-3 py-2 focus:ring-2 focus:ring-blue-500">
      <option value="">-- Selecione --</option>
      <option value="Moagem">Moagem</option>
      <option value="Pr√©-plantio">Pr√©-plantio</option>
      <option value="Plantio">Plantio</option>
      <option value="Socaria">Socaria</option>
    </select>
  </div>
  <div>
    <label for="redeEletrica" class="block text-sm font-semibold mb-1">Rede El√©trica</label>
    <select id="redeEletrica" required class="w-full border rounded px-3 py-2 focus:ring-2 focus:ring-blue-500">
      <option value="">-- Selecione --</option>
      <option value="RD ELET. ST¬∞ ANTONIO">RD ELET. ST¬∞ ANTONIO</option>
      <option value="RD ELET. MATO GROSSO">RD ELET. MATO GROSSO</option>
      <option value="RD ELET. RIACH√ÉO">RD ELET. RIACH√ÉO</option>
      <option value="RD ELET. PROGRESSO">RD ELET. PROGRESSO</option>
      <option value="RD ELET. VILA">RD ELET. VILA</option>
      <option value="RD SUBEST. 69">RD SUBEST. 69</option>
      <option value="REDE CASA DE FOR√áA">REDE CASA DE FOR√áA</option>
      <option value="REDE EQUATORIAL">REDE EQUATORIAL</option>
    </select>
  </div>

  <div id="carreteisContainer" class="lg:col-span-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  </div>

  <div>
    <label for="tipoIrrigacao" class="block text-sm font-semibold mb-1">Tipo de Irriga√ß√£o</label>
    <select id="tipoIrrigacao" required class="w-full border rounded px-3 py-2 focus:ring-2 focus:ring-blue-500">
      <option value="">-- Selecione --</option>
      <option value="Carretel">Carretel</option>
      <option value="Pivo">Pivo</option>
      <option value="Convencional">Convencional</option>
      <option value="Pressurizada">Pressurizada</option>
    </select>
  </div>
  <div>
    <label for="tipoProduto" class="block text-sm font-semibold mb-1">Produto</label>
    <select id="tipoProduto" required class="w-full border rounded px-3 py-2 focus:ring-2 focus:ring-blue-500">
      <option value="">-- Selecione --</option>
      <option value="√Ågua Limpa">√Ågua Limpa</option>
      <option value="√Ågua Reuso">√Ågua Reuso</option>
      <option value="Vinha√ßa">Vinha√ßa</option>
    </select>
  </div>
  <div>
    <label for="horasPlanejadas" class="block text-sm font-semibold mb-1">Horas Planejadas (dia)</label>
    <input id="horasPlanejadas" type="number" min="0" max="24" step="0.25" required class="w-full border rounded px-3 py-2" placeholder="Ex: 24" />
  </div>

  <div>
    <label for="velocidadeCarretel" class="block text-sm font-semibold mb-1">Velocidade do Carretel (m/h)</label>
    <input id="velocidadeCarretel" type="number" min="0" step="0.1" required class="w-full border rounded px-3 py-2" placeholder="Ex: 15.5" />
  </div>
  <div>
    <label for="metrosLineares" class="block text-sm font-semibold mb-1">Metros Lineares (m)</label>
    <input id="metrosLineares" readonly class="w-full border rounded px-3 py-2 bg-gray-200" placeholder="Calculado" />
  </div>
  <div>
    <label for="numeroCroqui" class="block text-sm font-semibold mb-1">N¬∞ Croqui</label>
    <input id="numeroCroqui" required class="w-full border rounded px-3 py-2" placeholder="Ex: 0001" />
  </div>

  <div>
    <label for="proxBloco" class="block text-sm font-semibold mb-1">Pr√≥x. Bloco a Irrigar</label>
    <input id="proxBloco" class="w-full border rounded px-3 py-2" placeholder="Ex: 22 - Vila EB2" />
  </div>
  <div>
    <label for="vazao" class="block text-sm font-semibold mb-1">Vaz√£o m¬≥/h</label>
    <input id="vazao" required class="w-full border rounded px-3 py-2" placeholder="Ex: 120 m¬≥/h" />
  </div>

</div>

          <div class="flex justify-end gap-3">
            <button type="submit" id="salvarArea" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Salvar √Årea</button>
            <button type="button" id="cancelarEdicao" class="hidden bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Cancelar</button>
          </div>
        </form>

        <hr class="border-gray-200" />

        <div>
          <label for="filtroProjetoCadastro" class="block mb-2 font-semibold text-gray-700">Filtrar √Åreas por Projeto</label>
          <select id="filtroProjetoCadastro" class="w-full max-w-sm border rounded px-3 py-2 mb-4 focus:ring-2 focus:ring-blue-500">
            <option value="">-- Todos os Projetos --</option>
          </select>
        </div>

        <div id="listaAreasCadastro" class="space-y-3"></div>
      </section>

      <section id="content-operador" class="p-6 hidden space-y-6">
        <div class="flex flex-col md:flex-row md:items-end gap-4">
          <div class="flex-1">
            <h2 class="text-2xl md:text-3xl font-semibold text-orange-600">Operador</h2>
          </div>
          <div class="flex gap-2">

            <button id="btnExportCSV" class="bg-emerald-600 text-white px-3 py-2 rounded hover:bg-emerald-700 text-sm">Exportar CSV (dia)</button>
            <button id="btnExportPDF" class="bg-indigo-600 text-white px-3 py-2 rounded hover:bg-indigo-700 text-sm">Exportar PDF (dia)</button>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div>
            <label class="block mb-1 font-semibold" for="filtroProjetoOperador">Projeto</label>
            <select id="filtroProjetoOperador" class="w-full border rounded px-3 py-2">
              <option value="">-- Todos os Projetos --</option>
            </select>
          </div>
          <div>
            <label class="block mb-1 font-semibold" for="filtroDataOperador">Data</label>
            <input type="date" id="filtroDataOperador" class="w-full border rounded px-3 py-2" />
          </div>
          <div class="flex items-end">
            <button id="btnFiltrarOperador" class="w-full md:w-auto bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Aplicar Filtros</button>
          </div>
        </div>

        <div id="listaAreasOperador" class="space-y-3"></div>
      </section>

      <section id="content-relatorios" class="p-6 hidden space-y-6">
        <div class="flex flex-col md:flex-row md:items-end gap-4">
          <div class="flex-1">
            <h2 class="text-2xl md:text-3xl font-semibold text-orange-600">Relat√≥rios</h2>
            <p class="text-sm text-gray-600">Consolida√ß√£o di√°ria por projeto e por √°rea.</p>
          </div>
          <div class="flex gap-2">
            <button id="btnExportCSVRel" class="bg-emerald-600 text-white px-3 py-2 rounded hover:bg-emerald-700 text-sm">Exportar CSV (Relat√≥rio)</button>
            <button id="btnExportPDFRel" class="bg-indigo-600 text-white px-3 py-2 rounded hover:bg-indigo-700 text-sm">Exportar PDF (Relat√≥rio)</button>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div>
            <label class="block mb-1 font-semibold" for="filtroProjetoRel">Projeto</label>
            <select id="filtroProjetoRel" class="w-full border rounded px-3 py-2">
              <option value="">-- Todos os Projetos --</option>
            </select>
          </div>
          <div>
            <label class="block mb-1 font-semibold" for="filtroDataRel">Data</label>
            <input type="date" id="filtroDataRel" class="w-full border rounded px-3 py-2" />
          </div>
          <div class="flex items-end">
            <button id="btnGerarRelatorio" class="w-full md:w-auto bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Gerar</button>
          </div>
        </div>

        <div id="sumarioRel" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-2">
          <div class="flex items-center space-x-3 bg-blue-50 border border-blue-200 p-4 rounded-lg shadow-sm">
            <svg class="w-8 h-8 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
            <div>
              <div class="text-xs font-semibold text-blue-700 uppercase">Horas Planejadas</div>
              <div id="sumPlanejadas" class="text-2xl font-bold text-blue-900">0</div>
            </div>
          </div>
          <div class="flex items-center space-x-3 bg-amber-50 border border-amber-200 p-4 rounded-lg shadow-sm">
            <svg class="w-8 h-8 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" /></svg>
            <div>
              <div class="text-xs font-semibold text-amber-700 uppercase">Horas Paradas</div>
              <div id="sumParadas" class="text-2xl font-bold text-amber-900">0</div>
            </div>
          </div>
          <div class="flex items-center space-x-3 bg-emerald-50 border border-emerald-200 p-4 rounded-lg shadow-sm">
            <svg class="w-8 h-8 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.01 12.01 0 002.944 12c.032 4.418 2.378 8.42 6.114 10.153a1 1 0 001.077-.042A12.01 12.01 0 0012 21.056c4.418-.032 8.42-2.378 10.153-6.114a1 1 0 00-.042-1.077c-1.734-2.221-4.075-3.951-6.114-5.642z" /></svg>
            <div>
              <div class="text-xs font-semibold text-emerald-700 uppercase">Horas Rodadas</div>
              <div id="sumRodadas" class="text-2xl font-bold text-emerald-900">0</div>
            </div>
          </div>
          <div class="flex items-center space-x-3 bg-purple-50 border border-purple-200 p-4 rounded-lg shadow-sm">
            <svg class="w-8 h-8 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16M17 4v16M4 8h16M4 16h16" /></svg>
            <div>
              <div class="text-xs font-semibold text-purple-700 uppercase">Efici√™ncia</div>
              <div id="sumEficiencia" class="text-2xl font-bold text-purple-900">0%</div>
            </div>
          </div>
          <div class="flex items-center space-x-3 bg-teal-50 border border-teal-200 p-4 rounded-lg shadow-sm">
            <svg class="w-8 h-8 text-teal-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7.5l-2.165 2.165a1.583 1.583 0 00-2.243 0L10 17.25m6-4.5L10 17.25M7.5 4.5l-3 3m10.5 6L8.25 10.5M5.25 15.75l-1.5 1.5M10.5 4.5l-3 3" /></svg>
            <div>
              <div class="text-xs font-semibold text-teal-700 uppercase">Metros Lineares (m)</div>
              <div class="text-xl font-bold text-teal-900">
                  Plano: <span id="sumMetrosPlano">0</span>
              </div>
              <div class="text-xl font-bold text-teal-900">
                  Real: <span id="sumMetrosReal">0</span>
              </div>
            </div>
          </div>
          <div class="flex items-center space-x-3 bg-green-50 border border-green-200 p-4 rounded-lg shadow-sm">
            <svg class="w-8 h-8 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" /></svg>
            <div>
              <div class="text-xs font-semibold text-green-700 uppercase">Hectares Irrigados (ha)</div>
              <div class="text-xl font-bold text-green-900">
                  Plano: <span id="sumHectaresPlano">0</span>
              </div>
              <div class="text-xl font-bold text-green-900">
                  Real: <span id="sumHectaresReal">0</span>
              </div>
            </div>
          </div>
          <div class="flex items-center space-x-3 bg-cyan-50 border border-cyan-200 p-4 rounded-lg shadow-sm">
            <svg class="w-8 h-8 text-cyan-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
            <div>
              <div class="text-xs font-semibold text-cyan-700 uppercase">Metros Lineares (Hor√≠metro)</div>
              <div id="sumMetrosHorimetro" class="text-2xl font-bold text-cyan-900">0</div>
            </div>
          </div>
<div class="flex items-center space-x-3 bg-sky-50 border border-sky-200 p-4 rounded-lg shadow-sm">
            <svg class="w-8 h-8 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 16v-2m8-8h2M4 12H2m15.364 6.364l1.414 1.414M4.222 4.222l1.414 1.414m12.728 0l-1.414 1.414M5.636 18.364l-1.414 1.414" /></svg>
            <div>
              <div class="text-xs font-semibold text-sky-700 uppercase">Irrig. Complementar (h)</div>
              <div id="sumComplementar" class="text-2xl font-bold text-sky-900">0</div>
            </div>
          </div> <div class="flex items-center space-x-3 bg-fuchsia-50 border border-fuchsia-200 p-4 rounded-lg shadow-sm">
            <svg class="w-8 h-8 text-fuchsia-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z" />
            </svg>
            <div>
              <div class="text-xs font-semibold text-fuchsia-700 uppercase">Qtde de Conjuntos</div>
              <div id="sumQtdeConjuntos" class="text-2xl font-bold text-fuchsia-900">0</div>
            </div>
          </div>

          <div class="flex items-center space-x-3 bg-orange-50 border border-orange-200 p-4 rounded-lg shadow-sm col-span-1 sm:col-span-2 md:col-span-1 lg:col-span-2">
            <svg class="w-8 h-8 text-orange-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path d="M15.362 5.214A8.252 8.252 0 0112 21 8.25 8.25 0 016.038 7.048 8.287 8.287 0 009 9.6a8.983 8.983 0 013.362-3.797z" stroke-linecap="round" stroke-linejoin="round"></path>
              <path d="M15.362 5.214A8.252 8.252 0 0112 21 8.25 8.25 0 016.038 7.048 8.287 8.287 0 009 9.6a8.983 8.983 0 013.362-3.797A8.324 8.324 0 0116.323 3.318 8.324 8.324 0 0118 9.6c0 3.866-1.58 7.34-4.177 9.882A8.252 8.252 0 0112 21z" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <div>
              <div class="text-xs font-semibold text-orange-700 uppercase">Info. Irriga√ß√£o</div>
              <div class="text-base font-bold text-orange-900">
                  √Årea Total: <span id="sumAreaTotal">0</span>
              </div>
              <div class="text-base font-bold text-green-900">
                  √Årea Irrigada: <span id="sumAreaIrrigada">0</span>
              </div>
              <div class="text-base font-bold text-red-600">
                  √Årea Restante: <span id="sumAreaRestante">0</span>
              </div>
            </div>
          </div>
        </div>

        <div id="tabelaRel" class="space-y-3 mt-4"></div>

        <hr class="border-gray-200 my-8" />

        <h3 class="text-xl md:text-2xl font-semibold text-blue-900">Relat√≥rio por √Årea</h3>
        <p class="text-sm text-gray-600">Gere um relat√≥rio detalhado para uma √°rea espec√≠fica.</p>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div>
            <label class="block mb-1 font-semibold" for="filtroAreaIndividual">Selecionar √Årea</label>
            <select id="filtroAreaIndividual" class="w-full border rounded px-3 py-2">
              <option value="">-- Selecione uma √Årea --</option>
            </select>
          </div>
          <div class="flex items-end">
            <button id="btnGerarRelatorioIndividual" class="w-full md:w-auto bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Gerar Relat√≥rio Individual</button>
          </div>
        </div>

        <div id="sumarioRelIndividual" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-2">
          <div class="flex items-center space-x-3 bg-blue-50 border border-blue-200 p-4 rounded-lg shadow-sm">
            <svg class="w-8 h-8 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
            <div>
              <div class="text-xs font-semibold text-blue-700 uppercase">Horas Planejadas</div>
              <div id="sumPlanejadasInd" class="text-2xl font-bold text-blue-900">0</div>
            </div>
          </div>
          <div class="flex items-center space-x-3 bg-amber-50 border border-amber-200 p-4 rounded-lg shadow-sm">
            <svg class="w-8 h-8 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" /></svg>
            <div>
              <div class="text-xs font-semibold text-amber-700 uppercase">Horas Paradas</div>
              <div id="sumParadasInd" class="text-2xl font-bold text-amber-900">0</div>
            </div>
          </div>
          <div class="flex items-center space-x-3 bg-emerald-50 border border-emerald-200 p-4 rounded-lg shadow-sm">
            <svg class="w-8 h-8 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.01 12.01 0 002.944 12c.032 4.418 2.378 8.42 6.114 10.153a1 1 0 001.077-.042A12.01 12.01 0 0012 21.056c4.418-.032 8.42-2.378 10.153-6.114a1 1 0 00-.042-1.077c-1.734-2.221-4.075-3.951-6.114-5.642z" /></svg>
            <div>
              <div class="text-xs font-semibold text-emerald-700 uppercase">Horas Rodadas</div>
              <div id="sumRodadasInd" class="text-2xl font-bold text-emerald-900">0</div>
            </div>
          </div>
          <div class="flex items-center space-x-3 bg-purple-50 border border-purple-200 p-4 rounded-lg shadow-sm">
            <svg class="w-8 h-8 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16M17 4v16M4 8h16M4 16h16" /></svg>
            <div>
              <div class="text-xs font-semibold text-purple-700 uppercase">Efici√™ncia</div>
              <div id="sumEficienciaInd" class="text-2xl font-bold text-purple-900">0%</div>
            </div>
          </div>
          <div class="flex items-center space-x-3 bg-teal-50 border border-teal-200 p-4 rounded-lg shadow-sm">
            <svg class="w-8 h-8 text-teal-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7.5l-2.165 2.165a1.583 1.583 0 00-2.243 0L10 17.25m6-4.5L10 17.25M7.5 4.5l-3 3m10.5 6L8.25 10.5M5.25 15.75l-1.5 1.5M10.5 4.5l-3 3" /></svg>
            <div>
              <div class="text-xs font-semibold text-teal-700 uppercase">Metros Lineares (m)</div>
              <div class="text-xl font-bold text-teal-900">
                  Plano: <span id="sumMetrosPlanoInd">0</span>
              </div>
              <div class="text-xl font-bold text-teal-900">
                  Real: <span id="sumMetrosRealInd">0</span>
              </div>
            </div>
          </div>
          <div class="flex items-center space-x-3 bg-green-50 border border-green-200 p-4 rounded-lg shadow-sm">
            <svg class="w-8 h-8 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" /></svg>
            <div>
              <div class="text-xs font-semibold text-green-700 uppercase">Hectares Irrigados (ha)</div>
              <div class="text-xl font-bold text-green-900">
                  Plano: <span id="sumHectaresPlanoInd">0</span>
              </div>
              <div class="text-xl font-bold text-green-900">
                  Real: <span id="sumHectaresRealInd">0</span>
              </div>
            </div>
          </div>
          <div class="flex items-center space-x-3 bg-cyan-50 border border-cyan-200 p-4 rounded-lg shadow-sm">
            <svg class="w-8 h-8 text-cyan-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
            <div>
              <div class="text-xs font-semibold text-cyan-700 uppercase">Metros Lineares (Hor√≠metro)</div>
              <div id="sumMetrosHorimetroInd" class="text-2xl font-bold text-cyan-900">0</div>
            </div>
          </div>
           <div class="flex items-center space-x-3 bg-sky-50 border border-sky-200 p-4 rounded-lg shadow-sm">
            <svg class="w-8 h-8 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 16v-2m8-8h2M4 12H2m15.364 6.364l1.414 1.414M4.222 4.222l1.414 1.414m12.728 0l-1.414 1.414M5.636 18.364l-1.414 1.414" /></svg>
            <div>
              <div class="text-xs font-semibold text-sky-700 uppercase">Irrig. Complementar (h)</div>
              <div id="sumComplementarInd" class="text-2xl font-bold text-sky-900">0</div>
            </div>
          </div>
        </div>
        <div id="tabelaRelIndividual" class="space-y-3 mt-4"></div>
      </section>
    </div>
  </main>



  <div id="modalParada" class="fixed inset-0 bg-black/40 hidden items-center justify-center z-40">
    <div class="bg-white w-full max-w-xl rounded-lg shadow-lg p-6 relative max-h-[90vh] overflow-y-auto">
      <button id="closeModal" class="absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-2xl leading-none">&times;</button>
      <h3 id="modalTitle" class="text-xl font-semibold mb-4">Registrar Atividade Di√°ria</h3>

      <div id="modalInfoArea" class="text-sm text-gray-700 mb-4"></div>

      <form id="formParada" class="space-y-4" novalidate>
        <fieldset class="border rounded p-3">
          <legend class="font-semibold text-gray-800">Tipo de Registro</legend>
          <div class="flex flex-wrap gap-4 pt-1">
              <label class="inline-flex items-center cursor-pointer">
                  <input type="radio" name="tipoRegistro" value="sem_parada" class="form-radio text-blue-600" required checked />
                  <span class="ml-2">Opera√ß√£o Normal (sem parada)</span>
              </label>
              <label class="inline-flex items-center cursor-pointer">
                  <input type="radio" name="tipoRegistro" value="parada" class="form-radio text-blue-600" />
                  <span class="ml-2 text-red-700 font-medium">Registrar Parada</span>
              </label>
              <label class="inline-flex items-center cursor-pointer">
                  <input type="radio" name="tipoRegistro" value="complementar" class="form-radio text-blue-600" />
                  <span class="ml-2 text-cyan-700 font-medium">Irriga√ß√£o Complementar</span>
              </label>
          </div>
        </fieldset>

        <div id="camposRegistro" class="hidden space-y-3">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              <div>
                <label class="block text-sm font-semibold">In√≠cio</label>
                <input id="inicioParada" type="datetime-local" class="w-full border rounded px-3 py-2" required />
              </div>
              <div>
                <label class="block text-sm font-semibold">T√©rmino</label>
                <input id="fimParada" type="datetime-local" class="w-full border rounded px-3 py-2" required />
              </div>
            </div>
            <div class="text-sm text-gray-700">Dura√ß√£o: <span id="duracaoParada">-</span></div>
            <div id="alertOverlap" class="hidden text-sm text-red-600">‚ö†Ô∏è O intervalo informado se sobrep√µe a um registro existente.</div>

            <div id="detalhesParada" class="hidden space-y-3 border-t pt-3 mt-3">
              <div>
                <label class="block text-sm font-semibold">Tipo de equipamento</label>
                <select id="codParada" class="w-full border rounded px-3 py-2" required>
                  <option value="">Selecione</option>
                  <option value="E">Eletrobomba (E)</option>
                  <option value="C">Carretel (C)</option>
                  <option value="R">Rede (R)</option>
                </select>
              </div>
              
               <div id="infoRedeEletrica" class="hidden text-sm p-2 bg-blue-50 border border-blue-200 rounded"></div>

              <div id="selecaoCarretelParada" class="hidden">
                  <label class="block text-sm font-semibold">Selecione o Carretel</label>
                  <select id="numeroCarretelParada" class="w-full border rounded px-3 py-2" required></select>
              </div>

              <div>
                <label for="horimetroInicial" class="block text-sm font-medium text-gray-700">Hor√≠metro Inicial</label>
                <input type="text" id="horimetroInicial" name="horimetroInicial" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm" placeholder="Ex: 1234.5">
              </div>
              <div>
                <label for="horimetroFinal" class="block text-sm font-medium text-gray-700">Hor√≠metro Final</label>
                <input type="text" id="horimetroFinal" name="horimetroFinal" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm" placeholder="Ex: 1235.0">
              </div>

              <div>
                <label class="block text-sm font-semibold">Equipamento/Rede com problema</label>
                <input id="equipamentoProblemaModal" type="text" class="w-full border rounded px-3 py-2" placeholder="Ex: 130001 ou Rede St.Antonio" />
              </div>

              <div>
                <label class="block text-sm font-semibold">Descri√ß√£o da Parada (c√≥digo)</label>
                <select id="descricaoParadaCodigoSelect" class="w-full border rounded px-3 py-2" required></select>
              </div>

              <div>
                <label class="block text-sm font-semibold">Descri√ß√£o do Problema (selecione um ou mais)</label>
                <div id="listaProblemas" class="max-h-48 overflow-y-auto border rounded p-2 space-y-1 mt-1">
                </div>
                <div class="mt-2">
                    <label class="inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="problemaOutro" class="form-checkbox">
                        <span class="ml-2">Outro</span>
                    </label>
                    <textarea id="descricaoProblemaOutro" class="hidden w-full border rounded px-3 py-2 mt-1" rows="2" placeholder="Descreva o outro problema"></textarea>
                </div>
              </div>
            </div>
            
            <div id="detalhesComplementar" class="hidden space-y-3 border-t pt-3 mt-3">
                <p class="text-sm font-medium text-gray-800">Detalhes da Irriga√ß√£o Complementar</p>
                <p class="text-xs text-gray-600">Selecione o carretel que foi substitu√≠do pelo canh√£o de espera.</p>
                <div>
                    <label class="block text-sm font-semibold">Carretel Substitu√≠do</label>
                    <select id="numeroCarretelComplementar" class="w-full border rounded px-3 py-2">
                        <option value="">Nenhum (opcional)</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="flex justify-end gap-3 pt-2">
          <button type="button" id="cancelarParada" class="bg-gray-200 px-4 py-2 rounded hover:bg-gray-300">Cancelar</button>
          <button type="submit" id="submitParadaBtn" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Salvar</button>
        </div>
      </form>

      <hr class="my-4" />

      <div>
        <h4 class="font-semibold mb-2">Hist√≥rico do dia</h4>
        <div id="historicoParadas" class="max-h-60 overflow-auto space-y-2 text-sm"></div>
      </div>
    </div>
  </div>

  <script type="module" src="script.js"></script>
</body>
</html>